<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane fx:id="rootContainer" styleClass="root-container" stylesheets="@css/AdminDashboard.css" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.studentnest.controllers.AdminDashboardController">

    <left>
        <VBox styleClass="sidebar">
            <padding>
                <Insets bottom="20" left="10" right="10" top="20" />
            </padding>
            <Label fx:id="welcomeLabel" alignment="CENTER" styleClass="welcome-label" text="Welcome, Admin!" VBox.vgrow="NEVER">
                <font>
                    <Font name="System Bold" size="18.0" />
                </font>
                <padding>
                    <Insets bottom="20" />
                </padding>
            </Label>
            <Button fx:id="usersButton" maxWidth="1.7976931348623157E308" onAction="#handleShowUsers" styleClass="sidebar-button" text="Users" />
            <Button fx:id="roomsButton" maxWidth="1.7976931348623157E308" onAction="#handleShowRooms" styleClass="sidebar-button" text="Rooms" />
            <Button fx:id="statisticsButton" maxWidth="1.7976931348623157E308" onAction="#handleShowStats" styleClass="sidebar-button" text="Statistics" />
            <Button fx:id="feedbackButton" maxWidth="1.7976931348623157E308" onAction="#handleShowFeedback" styleClass="sidebar-button" text="Feedback" />
            <Region VBox.vgrow="ALWAYS" />
            <Button fx:id="themeToggleButton" maxWidth="1.7976931348623157E308" onAction="#handleThemeToggle" styleClass="theme-toggle-button" text="ðŸŒ™" />
            <Button fx:id="logoutButton" maxWidth="1.7976931348623157E308" onAction="#handleBackToLogin" styleClass="logout-button" text="Logout" />
        </VBox>
    </left>

    <center>
        <TabPane fx:id="mainTabPane" styleClass="main-tab-pane" tabClosingPolicy="UNAVAILABLE">
            <Tab styleClass="main-tab" text="Users">
                <content>
                    <VBox styleClass="tab-content-pane">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <HBox alignment="CENTER_LEFT" spacing="10" styleClass="toolbar">
                            <Label styleClass="header-label" text="Users Management" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Button fx:id="refreshUsersButton" onAction="#handleRefreshUsers" styleClass="action-button refresh-button" text="Refresh" />
                            <Button fx:id="deleteUserButton" onAction="#handleDeleteUser" styleClass="action-button delete-button" text="Delete User" />
                        </HBox>
                        <TableView fx:id="usersTable" editable="false" styleClass="data-table" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="nameColumn" styleClass="table-column" text="Name" />
                                <TableColumn fx:id="userTypeColumn" styleClass="table-column" text="User Type" />
                                <TableColumn fx:id="usernameColumn" styleClass="table-column" text="Username" />
                                <TableColumn fx:id="phoneColumn" styleClass="table-column" text="Phone" />
                            </columns>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                            </columnResizePolicy>
                        </TableView>
                    </VBox>
                </content>
            </Tab>

            <Tab styleClass="main-tab" text="Rooms">
                <content>
                    <VBox styleClass="tab-content-pane">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <HBox alignment="CENTER_LEFT" spacing="10" styleClass="toolbar">
                            <Label styleClass="header-label" text="Rooms Management" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Button fx:id="refreshRoomsButton" onAction="#handleRefreshRooms" styleClass="action-button refresh-button" text="Refresh" />
                            <Button fx:id="deleteRoomButton" onAction="#handleDeleteRoom" styleClass="action-button delete-button" text="Delete Room" />
                        </HBox>
                        <TableView fx:id="roomsTable" editable="false" styleClass="data-table" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="roomLocationColumn" styleClass="table-column" text="Location" />
                                <TableColumn fx:id="roomPriceColumn" styleClass="table-column" text="Price" />
                                <TableColumn fx:id="roomOwnerColumn" styleClass="table-column" text="Owner Name" />
                                <TableColumn fx:id="roomTypeColumn" styleClass="table-column" text="Room Type" />
                                <TableColumn fx:id="roomContactColumn" styleClass="table-column" text="Contact Info" />
                            </columns>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                            </columnResizePolicy>
                        </TableView>
                    </VBox>
                </content>
            </Tab>

            <Tab styleClass="main-tab" text="Statistics">
                <content>
                    <GridPane alignment="TOP_CENTER" hgap="20" styleClass="stats-grid-pane" vgap="20">
                        <padding>
                            <Insets bottom="40" left="40" right="40" top="40" />
                        </padding>
                        <VBox styleClass="stats-card">
                            <Label styleClass="stats-title" text="Total Users" />
                            <Label fx:id="userCountLabel" styleClass="stats-value" text="0" />
                        </VBox>
                        <VBox styleClass="stats-card" GridPane.columnIndex="1">
                            <Label styleClass="stats-title" text="Total Rooms" />
                            <Label fx:id="roomCountLabel" styleClass="stats-value" text="0" />
                        </VBox>
                        <VBox styleClass="stats-card" GridPane.rowIndex="1">
                            <Label styleClass="stats-title" text="House Owners" />
                            <Label fx:id="ownerCountLabel" styleClass="stats-value" text="0" />
                        </VBox>
                        <VBox styleClass="stats-card" GridPane.columnIndex="1" GridPane.rowIndex="1">
                            <Label styleClass="stats-title" text="Students" />
                            <Label fx:id="studentCountLabel" styleClass="stats-value" text="0" />
                        </VBox>
                        <VBox styleClass="stats-card" GridPane.rowIndex="2">
                            <Label styleClass="stats-title" text="Users this month" />
                            <Label fx:id="monthlyUsersLabel" styleClass="stats-value" text="0" />
                        </VBox>
                        <VBox styleClass="stats-card" GridPane.columnIndex="1" GridPane.rowIndex="2">
                            <Label styleClass="stats-title" text="Rooms this month" />
                            <Label fx:id="monthlyRoomsLabel" styleClass="stats-value" text="0" />
                        </VBox>
                        <VBox alignment="CENTER" styleClass="chart-container" GridPane.columnSpan="2" GridPane.rowIndex="3">
                            <PieChart fx:id="userStatsChart" styleClass="user-stats-chart" title="User Distribution" />
                        </VBox>
                        <columnConstraints>
                            <ColumnConstraints />
                            <ColumnConstraints />
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints />
                            <RowConstraints />
                            <RowConstraints />
                            <RowConstraints />
                        </rowConstraints>
                    </GridPane>
                </content>
            </Tab>

            <Tab styleClass="main-tab" text="Feedback">
                <content>
                    <VBox styleClass="tab-content-pane">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <HBox alignment="CENTER_LEFT" spacing="10" styleClass="toolbar">
                            <Label styleClass="header-label" text="Feedback &amp; Issues" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Button fx:id="refreshFeedbackButton" onAction="#handleRefreshFeedback" styleClass="action-button refresh-button" text="Refresh" />
                            <Button fx:id="markResolvedButton" onAction="#handleMarkResolved" styleClass="action-button resolve-button" text="Mark as Resolved" />
                            <Button fx:id="deleteFeedbackButton" onAction="#handleDeleteFeedback" styleClass="action-button delete-button" text="Delete" />
                        </HBox>
                        <TableView fx:id="feedbackTable" editable="false" styleClass="data-table" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="feedbackUserColumn" styleClass="table-column" text="User" />
                                <TableColumn fx:id="feedbackTextColumn" styleClass="table-column" text="Feedback" />
                                <TableColumn fx:id="feedbackDateColumn" styleClass="table-column" text="Date" />
                                <TableColumn fx:id="feedbackStatusColumn" styleClass="table-column" text="Status" />
                            </columns>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                            </columnResizePolicy>
                        </TableView>
                    </VBox>
                </content>
            </Tab>
        </TabPane>
    </center>

</BorderPane>